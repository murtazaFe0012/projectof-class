<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/home.css">
    <title>Profil / Connexion - EventHub</title>
    <style>
        .auth-container {
            max-width: 400px;
            margin: 50px auto;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        .form-group {
            margin-bottom: 15px;
            display: flex;
            flex-direction: column;
        }

        .hidden {
            display: none;
        }

        .toggle-link {
            color: #007bff;
            cursor: pointer;
            text-decoration: underline;
        }

        input {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
    </style>
</head>

<body>
    <div class="menu-bar">
        <img src="/images/logo.png" alt="Logo" class="logo" style="max-width: 50px;">
        <h1>EventHub</h1>
        <div class="button-group">
            <button class="create-event-btn">Événements</button>
            <button class="create-event-btn">Créer un événement</button>
        </div>
    </div>

    <% if (typeof user !=='undefined' && user) { %>
        <div style="padding: 20px;">
            <h1>Bienvenue sur votre profil, <%= user.name %> !</h1>
            <h2>Voici vos informations :</h2>
            <p><strong>Nom complet :</strong>
                <%= user.firstname %>
                    <%= user.lastname %>
            </p>
            <p><strong>Email :</strong>
                <%= user.email %>
            </p>
            <p><strong>Entreprise :</strong>
                <%= user.company || 'Non renseignée' %>
            </p>
            <p><strong>Événements créés :</strong>
                <%= user.events ? user.events.length : 0 %>
            </p>
            <a href="/logout"><button>Se déconnecter</button></a>
        </div>
        <% } else { %>
            <div class="auth-container">

                <div id="login-form">
                    <h2>Connexion</h2>
                    <form action="/login" method="POST">
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label>Mot de passe</label>
                            <input type="password" name="password" required>
                        </div>
                        <button type="submit" class="create-event-btn">Se connecter</button>
                    </form>
                    <p>Pas de compte ? <span class="toggle-link" onclick="toggleAuth()">S'inscrire</span></p>
                </div>

                <div id="signup-form" class="hidden">
                    <h2>Inscription</h2>
                    <form action="/signup" method="POST" enctype="multipart/form-data">
                        <div class="form-group">
                            <label>Nom *</label>
                            <input type="text" name="lastname" required>
                        </div>
                        <div class="form-group">
                            <label>Prénom *</label>
                            <input type="text" name="firstname" required>
                        </div>
                        <div class="form-group">
                            <label>Email *</label>
                            <input type="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label>Mot de passe *</label>
                            <input type="password" name="password" required>
                        </div>
                        <div class="form-group">
                            <label>Vérification du mot de passe *</label>
                            <input type="password" name="password_confirm" required>
                        </div>
                        <div class="form-group">
                            <label>Téléphone *</label>
                            <input type="tel" name="phone" required>
                        </div>
                        <div class="form-group">
                            <label>Pays *</label>
                            <input type="text" name="country" required>
                        </div>
                        <div class="form-group">
                            <label>Date d'anniversaire *</label>
                            <input type="date" name="birthday" required>
                        </div>
                        <div class="form-group">
                            <label>Entreprise (optionnel)</label>
                            <input type="text" name="company">
                        </div>
                        <div class="form-group">
                            <label>Photo de profil (optionnel)</label>
                            <input type="file" name="profile_pic" accept="image/*">
                        </div>
                        <button type="submit" class="create-event-btn">Créer mon compte</button>
                    </form>
                    <p>Déjà un compte ? <span class="toggle-link" onclick="toggleAuth()">Se connecter</span></p>
                </div>
            </div>
            <% } %>

                <script>
                    function toggleAuth() {
                        document.getElementById('login-form').classList.toggle('hidden');
                        document.getElementById('signup-form').classList.toggle('hidden');
                    }
                </script>
</body>

</html>